<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Favicon -->
    <link rel="shortcut icon" href="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/160/google/274/castle_1f3f0.png" />
    
    <!-- CSS -->
    <link rel="stylesheet" href="public/css/main.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,800;1,300;1,800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/477d5dc120.js" crossorigin="anonymous"></script>
    
    <!-- Meta -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">

    <title>Jokoci.de</title>
</head>
<body>

    <div class="nav-container">
<nav id="nav">
    <div id="nav-1">
    </div>
    <div id="nav-2">
        <a id="name" href="/">Jokoci.de</a>
        <a href="mailto:jokobox@outlook.com">Mail</a>
        <a href="https://github.com/jokocide" target="_blank">Github</a>
        <a id="axe" href="https://github.com/jokocide/AXE" target="_blank">ðŸª“</a>
    </div>
    <div id="nav-2">
    </div>
</nav>    </div>

    <div class="base-container">
<div class='post-container'>
    <h1>Jack-o'-lert</h1>
    <p>A detailed overview on programmatically sending templated emails with Python and Jinja2.</p>
    <p>I created this repository to serve as a detailed overview on programmatically sending emails. I'm using Python here because I've noticed that most languages seem to rely on a third party module for this type of stuff, and I find them to be overly verbose for such a simple task. Python has the excellent <a href="https://docs.python.org/3/library/smtplib.html">smtplib</a> built in and we can leverage <a href="https://jinja.palletsprojects.com/en/2.11.x/templates/">Jinja2</a> templates to send pretty much anything we would ever need.</p>
<h2>Setup</h2>
<p>Start by cloning the repository.</p>
<pre><code class="language-sh">git clone https://github.com/jokocide/jack-o-lert.git
</code></pre>
<p>Move to the jack-o-lert directory and create a virtual environment.</p>
<pre><code class="language-sh">python3 -m venv venv
</code></pre>
<p>Activate the virtual environment.</p>
<pre><code class="language-sh"># Windows
.\venv\Scripts\activate

# Unix
source venv/bin/activate
</code></pre>
<p>Confirm that pip is actually pointing to your virtual environment.</p>
<pre><code class="language-sh"># Windows
Get-Command pip
# ... C:\Users\jokocide\Code\jack-o-lert\venv\Scripts\pip.exe

# Unix
which pip
# ... /users/jokocide/code/jack-o-lert/venv/bin/pip
</code></pre>
<p>Install the project dependencies.</p>
<pre><code class="language-sh">python3 -m pip install -r requirements.txt
</code></pre>
<p>This project is set up with some example functionality. You can open up <span class="refer-code">main.py</span> and see how we are making a GET request to an API, processing the data with a few functions and then injecting our data into the Jinja2 template before we send the email with smtplib. This is all kept pretty simple and thanks to Python's standard library we don't really need to rely on using a ton of third party modules to get this done. You can remove any remaining module imports that you don't need, but I've kept them pretty sparse to be applicable to most use cases.</p>
<p>Go ahead and open up <span class="refer-code">main.py</span>. You'll see that the document includes docstrings to walk you through configuring the files that we need to get this going, but here is an overview:</p>
<ol>
<li>Rename the <span class="refer-code">jack-o-lert/jackolert/dummy_env.py</span> file to <span class="refer-code">env.py</span>. Update the values.</li>
<li>Review the template file at <span class="refer-code">jack-o-lert/jackolert/template/template.py</span></li>
<li><span class="refer-code">main.py</span> includes example functions to demonstrate making an API call. The <span class="refer-code">sendMail</span> function details using smptlib and Jinja2, so you might want to pay attention to that one.</li>
</ol>
<blockquote>
<p>Seeing magic variables? don't forget that we are importing from <span class="refer-code">template.py</span> &amp; <span class="refer-code">env.py</span>!</p>
</blockquote>
<p>After everything is said and done, you can try firing off a test email to your own address by targeting yourself in the receiving_address field in env.py. You can also send emails to multiple people by specifying it in the following format:</p>
<pre><code class="language-py">receiving_address = &quot;person1@outlook.com, person2@outlook.com&quot;
</code></pre>
<p>Feel free to <a href="mailto:jokobox@outlook.com">contact</a> me if have questions or comments.</p>

</div>

    </div>

</body>
</html>